<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churn Prediction</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 20px; }
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-weight: 500; margin-bottom: 5px; color: #555; }
        select, input { padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        button { grid-column: span 2; padding: 12px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button:hover { background: #0056b3; }
        .result { margin-top: 20px; padding: 20px; border-radius: 4px; display: none; }
        .result.high { background: #fee; border: 1px solid #f00; }
        .result.medium { background: #fff3e0; border: 1px solid #ff9800; }
        .result.low { background: #e8f5e9; border: 1px solid #4caf50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Customer Churn Prediction</h1>
        <form id="predictionForm" class="form-grid">
            <div class="form-group">
                <label>Gender</label>
                <select name="gender"><option>Male</option><option>Female</option></select>
            </div>
            <div class="form-group">
                <label>Senior Citizen</label>
                <select name="SeniorCitizen"><option value="0">No</option><option value="1">Yes</option></select>
            </div>
            <div class="form-group">
                <label>Partner</label>
                <select name="Partner"><option>Yes</option><option>No</option></select>
            </div>
            <div class="form-group">
                <label>Dependents</label>
                <select name="Dependents"><option>Yes</option><option>No</option></select>
            </div>
            <div class="form-group">
                <label>Tenure (months)</label>
                <input type="number" name="tenure" value="12">
            </div>
            <div class="form-group">
                <label>Phone Service</label>
                <select name="PhoneService"><option>Yes</option><option>No</option></select>
            </div>
            <div class="form-group">
                <label>Multiple Lines</label>
                <select name="MultipleLines"><option>Yes</option><option>No</option><option>No phone service</option></select>
            </div>
            <div class="form-group">
                <label>Internet Service</label>
                <select name="InternetService"><option>Fiber optic</option><option>DSL</option><option>No</option></select>
            </div>
            <div class="form-group">
                <label>Online Security</label>
                <select name="OnlineSecurity"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Online Backup</label>
                <select name="OnlineBackup"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Device Protection</label>
                <select name="DeviceProtection"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Tech Support</label>
                <select name="TechSupport"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Streaming TV</label>
                <select name="StreamingTV"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Streaming Movies</label>
                <select name="StreamingMovies"><option>Yes</option><option>No</option><option>No internet service</option></select>
            </div>
            <div class="form-group">
                <label>Contract</label>
                <select name="Contract"><option>Month-to-month</option><option>One year</option><option>Two year</option></select>
            </div>
            <div class="form-group">
                <label>Paperless Billing</label>
                <select name="PaperlessBilling"><option>Yes</option><option>No</option></select>
            </div>
            <div class="form-group">
                <label>Payment Method</label>
                <select name="PaymentMethod"><option>Electronic check</option><option>Mailed check</option><option>Bank transfer (automatic)</option><option>Credit card (automatic)</option></select>
            </div>
            <div class="form-group">
                <label>Monthly Charges ($)</label>
                <input type="number" step="0.01" name="MonthlyCharges" value="70.35">
            </div>
            <div class="form-group">
                <label>Total Charges ($)</label>
                <input type="number" step="0.01" name="TotalCharges" value="844.20">
            </div>
            <button type="submit">Predict Churn</button>
        </form>
        <div id="result" class="result">
            <h3>Prediction Result</h3>
            <p id="resultText"></p>
        </div>
    </div>
    <script>
        document.getElementById('predictionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            data.SeniorCitizen = parseInt(data.SeniorCitizen);
            data.tenure = parseInt(data.tenure);
            data.MonthlyCharges = parseFloat(data.MonthlyCharges);
            data.TotalCharges = parseFloat(data.TotalCharges);

            const response = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await response.json();

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result ' + result.risk_level.toLowerCase();
            document.getElementById('resultText').innerHTML =
                `<strong>Churn:</strong> ${result.churn ? 'Yes' : 'No'}<br>
                 <strong>Probability:</strong> ${(result.churn_probability * 100).toFixed(1)}%<br>
                 <strong>Risk Level:</strong> ${result.risk_level}`;
        });
    </script>
</body>
</html>
